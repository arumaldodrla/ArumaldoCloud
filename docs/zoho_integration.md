# Zoho Integration Guide: Arumaldo Cloud

## 1. Introduction

Arumaldo Cloud leverages the Zoho One ecosystem for its business operations, including CRM, billing, invoicing, support, and contracts. This document provides a comprehensive guide to integrating with Zoho services. The platform uses Zoho as the source of truth for business data, but all customer-facing interactions occur within the Arumaldo Cloud portal.

## 2. Zoho Applications Used

| Application | Purpose |
| :--- | :--- |
| **Zoho CRM** | Customer and lead management, segmentation via tags. |
| **Zoho Billing** | Subscription management. |
| **Zoho Books** | Invoicing and accounting. |
| **Zoho Desk** | Support ticketing system. |
| **Zoho Sign** | Electronic signatures for partner/reseller agreements only. |
| **Zoho Mail** | Business email (optional). |

## 3. Integration Architecture

The integration follows a "feed, don't rely" model. This means that Arumaldo Cloud will push data to Zoho applications but will not use Zoho portals for customer-facing processes. All customer interactions, such as subscribing, managing subscriptions, and viewing invoices, will happen within the Arumaldo Cloud portal.

```
┌─────────────────────────────────────────────────────────────────────────┐
│                    ARUMALDO CLOUD PORTAL                                │
│   (Customer subscribes, manages subscription, views invoices)           │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓ API Calls
┌─────────────────────────────────────────────────────────────────────────┐
│                    SUPABASE EDGE FUNCTIONS                              │
│   (Orchestrates all Zoho API interactions)                              │
└─────────────────────────────────────────────────────────────────────────┘
                                    ↓ API Calls
┌─────────────────────────────────────────────────────────────────────────┐
│                         ZOHO ONE                                        │
│   CRM  │  Billing  │  Books  │  Desk  │  Sign  │  Mail                  │
└─────────────────────────────────────────────────────────────────────────┘
```

## 4. Zoho CRM Integration

### 4.1 Customer Segmentation

All customers are added to Zoho CRM with tags for segmentation. Tags are used to categorize customers by plan, status, and other attributes.

| Tag | Description |
| :--- | :--- |
| `plan:starter` | Customer is on the Starter plan. |
| `plan:professional` | Customer is on the Professional plan. |
| `plan:business` | Customer is on the Business plan. |
| `plan:enterprise` | Customer is on the Enterprise plan. |
| `status:trial` | Customer is in the trial period. |
| `status:active` | Customer has an active subscription. |
| `status:suspended` | Customer's subscription is suspended. |

### 4.2 API Endpoints

| Action | Zoho CRM API Endpoint |
| :--- | :--- |
| Create Contact | `POST /crm/v2/Contacts` |
| Update Contact | `PUT /crm/v2/Contacts/{id}` |
| Add Tag | `POST /crm/v2/Contacts/{id}/actions/add_tags` |

## 5. Zoho Billing Integration

### 5.1 Subscription Management

All subscriptions are managed in Zoho Billing. When a customer subscribes or changes their plan, the Arumaldo Cloud portal calls the Zoho Billing API to create or update the subscription.

| Action | Zoho Billing API Endpoint |
| :--- | :--- |
| Create Subscription | `POST /subscriptions` |
| Update Subscription | `PUT /subscriptions/{id}` |
| Cancel Subscription | `POST /subscriptions/{id}/cancel` |
| Retrieve Subscription | `GET /subscriptions/{id}` |

### 5.2 Payment Processing

Payments are processed through Authorize.net, which is integrated with Zoho Billing. When a customer enters their payment information in the Arumaldo Cloud portal, the data is sent directly to Authorize.net for tokenization. The token is then stored in Zoho Billing for recurring payments.

## 6. Zoho Books Integration

### 6.1 Invoicing

Invoices are automatically generated by Zoho Billing and synced to Zoho Books for accounting purposes. Customers can view their invoices in the Arumaldo Cloud portal.

| Action | Zoho Books API Endpoint |
| :--- | :--- |
| Retrieve Invoice | `GET /invoices/{id}` |
| List Invoices | `GET /invoices?customer_id={id}` |

## 7. Zoho Desk Integration

### 7.1 Support Ticketing

When the AI support agent cannot resolve a customer's issue, it will create a ticket in Zoho Desk. The ticket will include all relevant context, such as the customer's account information and the conversation history.

| Action | Zoho Desk API Endpoint |
| :--- | :--- |
| Create Ticket | `POST /tickets` |
| Update Ticket | `PUT /tickets/{id}` |
| Add Comment | `POST /tickets/{id}/comments` |

## 8. Zoho Sign Integration

### 8.1 Partner and Reseller Agreements

Zoho Sign is used exclusively for partner and reseller agreements, not for regular customer contracts. When a new partner or reseller joins the Arumaldo Cloud ecosystem, partnership documents are uploaded to Zoho Sign for electronic signature. This includes reseller agreements, partnership terms, revenue sharing agreements, and any other legal documents required for the partner relationship.

| Action | Zoho Sign API Endpoint |
| :--- | :--- |
| Create Document | `POST /requests` |
| Get Document Status | `GET /requests/{id}` |

## 9. Authentication

All Zoho API calls are authenticated using OAuth 2.0. The Arumaldo Cloud platform stores a refresh token for each Zoho application, which is used to obtain access tokens as needed.
